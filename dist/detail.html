<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Document</title><style>#nav{
			width:60%;
			height: 600px;
			/*border:1px solid red;*/
			margin:20px auto;
		}
		.img5{
			width:400px;
			float:left;
			margin-right: 50px;
		}
		#divs{
			float:left;
			
		}
		#name{
			font-size: 30px;
			color: #555;

		}
		#price{
			color: #ccc;
			font-size: 20px;
		}
		#price span{
			color: #64a131;
		}
		#speci{
			color: #ccc;
		}
		#speci span{
			padding:1px 20px;
			background-color: #64a131;
			color: #fff;
			font-size: 15px;
			margin-left: 10px;
		}
		#btn{
			width: 150px;
			height: 40px;
			position: absolute;
			top:500px;
			right:700px;
			background-color: #64a131;
			color: #fff;
			border:none;
			border-right: 30px;
		}
		#number{
			color: #666;
		}
		#btnLeft,#btnRight{
			padding:0px 10px;
			background: #ccc;
			float:left;
		}
		#num1{
			width: 93px;
			height: 21px;
			border:1px solid #666;
			float: left;
		}
		#inp3{
			width: 30px;
			height: 18px;
			float:left;
		}
		#btn1{
			width: 150px;
			height: 40px;
			position: absolute;
			top:500px;
			right:500px;
			background-color: #64a131;
			color: #fff;
			border:none;
			border-right: 30px;
		}
		#btn1 a{
			display: block;
			width: 100%;
			color: #fff;
			 text-decoration:none;
		}
		.log2{
			height: 100px;
			width: 100%;
			box-shadow: 0 2px 2px #ccc;
		}
		.log2 img{
			margin-left: 130px;
			display: block;
			margin-top: 20px;
		}</style><link rel="stylesheet" href="css/index.css"></head><header><div id="head_top"><span id="site"><span id="now_city">上海</span><div id="site_all"><div class="site_small"><p class="hot_city">热门城市:</p><p id="city_one"><span>上海</span> <span>广州</span> <span>北京</span> <span>苏州</span> <span>南京</span> <span>深圳</span></p><p class="hot_city">选择城市:</p><ul id="elect"><span><p>上海</p></span><span><p>上海崇明</p></span><li><span>江苏&nbsp&nbsp^</span><div><p>常州</p><p>淮安</p><p>连云港</p><p>南京</p><p>南通</p><p>苏州</p><p>泰州</p><p>无锡</p><p>宿迁</p><p>徐州</p><p>盐城</p><p>扬州</p><p>镇江</p></div></li><li><span>浙江&nbsp&nbsp^</span><div><p>杭州</p><p>湖州</p><p>嘉兴</p><p>金华</p><p>丽水</p><p>宁波</p><p>衢州</p><p>绍兴</p><p>台州</p><p>温州</p><p>州山</p></div></li><li><span>安徽&nbsp&nbsp^</span><div><p>安庆</p><p>蚌埠</p><p>亳州</p><p>池州</p><p>滁州</p><p>阜阳</p><p>合肥</p><p>淮北</p><p>淮南</p><p>黄山</p><p>马鞍山</p><p>芜湖</p><p>宿州</p><p>宣城</p></div></li><span><p>北京</p></span><span><p>天津</p></span><li><span>河北&nbsp&nbsp^</span><div><p>石家庄</p><p>廊坊</p><p>承德</p><p>唐山</p><p>保定</p><p>沧州</p><p>邯郸</p><p>衡水</p><p>秦皇岛</p><p>邢台</p><p>张家口</p></div></li><li><span>广东&nbsp&nbsp^</span><div><p>深圳</p><p>广州</p><p>珠海</p><p>汕头</p><p>韶关</p><p>佛山</p><p>江门</p><p>湛江</p><p>茂名</p><p>肇庆</p><p>惠州</p><p>梅州</p><p>汕尾</p><p>河源</p><p>阳江</p><p>清远</p><p>东莞</p><p>中山</p><p>揭阳</p><p>云浮</p><p>潮州</p></div></li></ul></div></div></span><span class="mail">满百包邮(环郊内)</span> <span style="color: #64a131" class="mail">星夜达</span><ul id="uls"><li><span>[登录]</span> , <span>[注册有惊喜]</span> &nbsp丨</li><li class="notice_noe"><p>果园公告 &nbsp丨</p><div class="notice"><p>全仓充值活动调整公告</p><p>全仓充值活动调整公告</p><p>全仓充值活动调整公告</p><p class="more">查看更多 ></p></div></li><li><span>劵卡兑换</span> &nbsp丨</li><li class="phone_one"><p>手机果园 &nbsp丨</p><div class="phone"><p><a>下载果园app,</a>即享果园特价商品</p><div class="phone_two"><img class="imgs1" src="images/guan_ewcode2.jpg"> <img class="imgs2" src="images/guan_btn01.jpg"> <img class="imgs3" src="images/guan_btn02.jpg"></div><div class="phone_thren"><img class="imgs4" src="images/guan_ewcode1.jpg"><p class="attention_one">关注果园微信</p><p class="attention_two">优惠信息实时掌握</p></div></div></li><li>400-720-0770</li></ul></div></header><div class="log2"><img src="images/logo.png"></div><div id="nav"></div><button id="btn">加入购物车</button> <button id="btn1"><a href="list.html">去结算</a></button><footer><ul id="trait"><li></li><li></li><li></li><li></li></ul><div class="logo"><img src="images/logo.png"></div><div class="tel"><img src="images/guan_tel.png"></div><div class="font_gray"><span class="font_color">电话客服 </span>09:00 - 21:00<br><span class="font_color">在线客服 </span>08:00 - 24:00</div><ul class="unstyled"><li><img src="images/guan_ewcode1.jpg"><p>天天果园官方微信</p></li><li><img src="images/guan_ewcode2.jpg"><p>天天果园APP</p></li></ul><ul class="unstyled1"><li><h4>购物指南</h4><p>新用户注册</p><p>在线下单</p><p>支付方式</p></li><li><h4>配送说明</h4><p>运费说明</p><p>运费方式</p><p>发票说明</p></li><li><h4>售后服务</h4><p>退换货规则</p><p>服务保障承诺</p><p>验货与签收</p></li><li><h4>企业服务</h4><p>企业订购</p><p>公司简介</p><p>定制专区</p></li></ul><p class="line"></p><p class="cop">版权所有 ©2017上海天天鲜果电子商务有限公司 保留所有权利 | 沪ICP备12042163</p><p class="vi_color">天天果园 鲜果网购</p><div class="supe"><img src="images/guan_shgs.gif"> <img src="images/guan_wgdjp.png"></div></footer><img src="images/kf.png" class="convert"><body><script type="text/javascript" src="libs/jquery.js"></script><script type="text/javascript">// http://localhost:3000/detail.html?id=7
$(function(){	
	$.ajax({
		url: 'static/index.json',
		type: 'GET',
		data: {},
		success:function(data){
			console.log(data)
			var Param = window.location.search;
         	var obj = getParam(Param);
        	
        // 用来获取地址栏中的参数
        	function getParam(str){       	
            	var obj = {};
           	 	var id_str = str.split('?')[1].split('=')[1];
 				
           	 	return id_str;
       	 	}
       	 	for(var i =0; i < data.giftData.length; i++){
       	 		if(obj == data.giftData[i].id){
       	 			var gain = data.giftData[i]
       	 			$('#nav').html('<img src="images/'+gain.imgSrc+'" class="img5"><divid="divs"><p id="name">'+gain.name+'</p><p id="price">果园价&nbsp<span>￥'+gain.price+'</span></p><p id="speci">规格&nbsp<span>'+gain.speci+'</span></p><p id="number">数量&nbsp<div id ="num1"><span id="btnLeft">-</span><input type="tel" name="" value="1" id="inp3"><span id="btnRight">+</span></div></p></div>');
       	 			var index = 1;
       	 		$('#btnRight').click(function(){
       	 			index++;
       	 			$('#inp3').val(index)
       	 			
       	 		});
       	 		$('#btnLeft').click(function(){
       	 			index--;
       	 			if(index <= 1){
       	 				index = 1;
       	 			}
       	 			$('#inp3').val(index)
       	 			
       	 		});
       	 		// 购物车
                var $listArr = localStorage.shop_list ? JSON.parse(localStorage.shop_list) : [];
                $('#btn').click(function(){
                	alert('加入购物车');
                	for(var i = 0; i < $listArr.length; i++){
                		if(gain.id == $listArr[i].id){
    					alert('重复添加');
    					// 出错点
    					$listArr[i].num = parseInt($listArr[i].num) + index;
    					$listArr[i].pri1 = parseInt($listArr[i].num) * parseInt($listArr[i].price);
    					console.log($listArr[i].pri1)
    					var str = JSON.stringify($listArr);
    					localStorage.shop_list = str;
    					return;
    					}
                	}
                	gain.num = index;
                	gain.pri1 = index * parseInt(gain.price);
                	$listArr.push(gain);
                	var str = JSON.stringify($listArr);
    				localStorage.shop_list = str;
                	
                });		
       	 		}
       	 	}
       	 		for(var i =0; i < data.family.length; i++){
       	 		if(obj == data.family[i].id){
       	 			var gain = data.family[i]
       	 			$('#nav').html('<img src="images/'+gain.imgSrc+'" class="img5"><divid="divs"><p id="name">'+gain.name+'</p><p id="price">果园价&nbsp<span>￥'+gain.price+'</span></p><p id="speci">规格&nbsp<span>'+gain.speci+'</span></p><p id="number">数量&nbsp<div id ="num1"><span id="btnLeft">-</span><input type="tel" name="" value="1" id="inp3"><span id="btnRight">+</span></div></p></div>');
       	 			var index = 1;
       	 		$('#btnRight').click(function(){
       	 			index++;
       	 			$('#inp3').val(index)
       	 			
       	 		});
       	 		$('#btnLeft').click(function(){
       	 			index--;
       	 			if(index <= 1){
       	 				index = 1;
       	 			}
       	 			$('#inp3').val(index)
       	 			
       	 		});
       	 		// 购物车
                var $listArr = localStorage.shop_list ? JSON.parse(localStorage.shop_list) : [];
                $('#btn').click(function(){
                	alert('加入购物车');
                	for(var i = 0; i < $listArr.length; i++){
                		if(gain.id == $listArr[i].id){
    					alert('重复添加');
    					// 出错点
    					$listArr[i].num = parseInt($listArr[i].num) + index;
    					$listArr[i].pri1 = parseInt($listArr[i].num) * parseInt($listArr[i].price);
    					console.log($listArr[i].pri1)
    					var str = JSON.stringify($listArr);
    					localStorage.shop_list = str;
    					return;
    					}
                	}
                	gain.num = index;
                	gain.pri1 = index * parseInt(gain.price);
                	$listArr.push(gain);
                	var str = JSON.stringify($listArr);
    				localStorage.shop_list = str;
                	
                });		
       	 		}
       	 	}
       	 		for(var i =0; i < data.world.length; i++){
       	 		if(obj == data.world[i].id){
       	 			var gain = data.world[i]
       	 			$('#nav').html('<img src="images/'+gain.imgSrc+'" class="img5"><divid="divs"><p id="name">'+gain.name+'</p><p id="price">果园价&nbsp<span>￥'+gain.price+'</span></p><p id="speci">规格&nbsp<span>'+gain.speci+'</span></p><p id="number">数量&nbsp<div id ="num1"><span id="btnLeft">-</span><input type="tel" name="" value="1" id="inp3"><span id="btnRight">+</span></div></p></div>');
       	 			var index = 1;
       	 		$('#btnRight').click(function(){
       	 			index++;
       	 			$('#inp3').val(index)
       	 			
       	 		});
       	 		$('#btnLeft').click(function(){
       	 			index--;
       	 			if(index <= 1){
       	 				index = 1;
       	 			}
       	 			$('#inp3').val(index)
       	 			
       	 		});
       	 		// 购物车
                var $listArr = localStorage.shop_list ? JSON.parse(localStorage.shop_list) : [];
                $('#btn').click(function(){
                	alert('加入购物车');
                	for(var i = 0; i < $listArr.length; i++){
                		if(gain.id == $listArr[i].id){
    					alert('重复添加');
    					// 出错点
    					$listArr[i].num = parseInt($listArr[i].num) + index;
    					$listArr[i].pri1 = parseInt($listArr[i].num) * parseInt($listArr[i].price);
    					console.log($listArr[i].pri1)
    					var str = JSON.stringify($listArr);
    					localStorage.shop_list = str;
    					return;
    					}
                	}
                	gain.num = index;
                	gain.pri1 = index * parseInt(gain.price);
                	$listArr.push(gain);
                	var str = JSON.stringify($listArr);
    				localStorage.shop_list = str;
                	
                });		
       	 		}
       	 	}
       	 		for(var i =0; i < data.fresh.length; i++){
       	 		if(obj == data.fresh[i].id){
       	 			var gain = data.fresh[i]
       	 			$('#nav').html('<img src="images/'+gain.imgSrc+'" class="img5"><divid="divs"><p id="name">'+gain.name+'</p><p id="price">果园价&nbsp<span>￥'+gain.price+'</span></p><p id="speci">规格&nbsp<span>'+gain.speci+'</span></p><p id="number">数量&nbsp<div id ="num1"><span id="btnLeft">-</span><input type="tel" name="" value="1" id="inp3"><span id="btnRight">+</span></div></p></div>');
       	 			var index = 1;
       	 		$('#btnRight').click(function(){
       	 			index++;
       	 			$('#inp3').val(index)
       	 			
       	 		});
       	 		$('#btnLeft').click(function(){
       	 			index--;
       	 			if(index <= 1){
       	 				index = 1;
       	 			}
       	 			$('#inp3').val(index)
       	 			
       	 		});
       	 		// 购物车
                var $listArr = localStorage.shop_list ? JSON.parse(localStorage.shop_list) : [];
                $('#btn').click(function(){
                	alert('加入购物车');
                	for(var i = 0; i < $listArr.length; i++){
                		if(gain.id == $listArr[i].id){
    					alert('重复添加');
    					// 出错点
    					$listArr[i].num = parseInt($listArr[i].num) + index;
    					$listArr[i].pri1 = parseInt($listArr[i].num) * parseInt($listArr[i].price);
    					console.log($listArr[i].pri1)
    					var str = JSON.stringify($listArr);
    					localStorage.shop_list = str;
    					return;
    					}
                	}
                	gain.num = index;
                	gain.pri1 = index * parseInt(gain.price);
                	$listArr.push(gain);
                	var str = JSON.stringify($listArr);
    				localStorage.shop_list = str;
                	
                });		
       	 		}
       	 	}
		}
	});
	 
});</script></body></html>